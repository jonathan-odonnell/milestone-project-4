{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container-fluid hero-image p-0" style="background-image: url('{{ MEDIA_URL }}contact.jpg')">
    <div class="overlay">&nbsp;</div>
    <div class="row no-gutters">
        <div class="col-12">
            <div class="jumbotron jumbotron-fluid">
                <div class="container">
                    <h1 class="display-2 text-center text-white">Contact Us</h1>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container py-4">
    <div class="row g-0">
        <div class="col-12 col-lg-4 p-4 order-lg-1">
            <div class="contact-info-item mb-3">
                <div class="key">
                    <i class="fas fa-map-marker-alt"></i>
                </div>
                <div class="value">
                    <h4 class="mb-2">Location:</h4>
                    <p class="mb-0">6th Floor, Hudson's Bay,</p>
                    <p class="mb-0">176 Yonge Street, Toronto,</p>
                    <p class="mb-0">ON, M5C 2L7</p>
                </div>
            </div>
            <div class="contact-info-item mb-3">
                <div class="key">
                    <i class="far fa-clock"></i>
                </div>
                <div class="value">
                    <h4 class="mb-2">Open Hours:</h4>
                    <p class="mb-0">Monday - Friday</p>
                    <p class="mb-0">09:00 - 17:00</p>
                </div>
            </div>
            <div class="contact-info-item mb-3">
                <div class="key">
                    <i class="fas fa-envelope"></i>
                </div>
                <div class="value">
                    <h4 class="mb-2">Email:</h4>
                    <p class="mb-0">info@goexplore.com</p>
                </div>
            </div>
            <div class="contact-info-item">
                <div class="key">
                    <i class="fas fa-phone-alt"></i>
                </div>
                <div class="value">
                    <h4 class="mb-2">Telephone:</h4>
                    <p class="mb-0">+1 1234 55488 55</p>
                </div>
            </div>
        </div>
        <div class="col-12 col-lg-8 p-4 order-lg-0">
            <h2 class="mb-4"><strong>Get In Touch</strong></h2>
            <form>
                {% csrf_token %}
                <div class="row">
                    <div class="col-12 col-md-6">
                        {{ form.name | as_crispy_field }}
                    </div>
                    <div class="col-12 col-md-6">
                        {{ form.email | as_crispy_field }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        {{ form.subject | as_crispy_field }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        {{ form.message | as_crispy_field }}
                    </div>
                </div>
                <button class="btn btn-info">Send Message</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
{% block postloadjs %}
{{ block.super }}
<script>
    let subjectSelected = $("#id_subject").val();
    if (!subjectSelected) {
        $("#id_subject").css("color", "#a9a9a9");
    }
    $("#id_subject").change(function () {
        subjectSelected = $(this).val();
        if (!subjectSelected) {
            $(this).css("color", "#a9a9a9");
        } else {
            $(this).css("color", "#4a4a4a");
        }
    });
    $('form .btn').click(function (e) {
        e.preventDefault()
        if ($('form')[0].reportValidity()) {
            let formData = {
                'csrfmiddlewaretoken': $('input[name="csrfmiddlewaretoken"]').val(),
                'name': $('#id_name').val(),
                'email': $('#id_email').val(),
                'subject': $('#id_subject').val(),
                'message': $('#id_message').val(),
            }
            $.post('{% url "contact" %}', formData).done(function () {
                $(`<div class="d-flex justify-content-center align-items-center h-100 ">
                    <p>Thank you for your message. A member of the team will be in touch shortly</p>
            </div>`).insertAfter('form')
                $('form').remove()
            })
        }
    })
</script>
{% endblock %}